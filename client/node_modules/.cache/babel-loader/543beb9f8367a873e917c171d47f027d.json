{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\svary\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\Auth\\\\client\\\\src\\\\components\\\\weatherList\\\\WeatherList.js\",\n    _s = $RefreshSig$();\n\nimport './WeatherList.css';\nimport { useEffect, useState } from \"react\";\nimport Button from 'react-bootstrap/Button';\nimport { useDispatch, useSelector, getState } from 'react-redux';\nimport { searchCity, localCity, addUserCity, closeModal } from './WeatherSlice';\nimport WeatherItems from '../weatherItems/WeatherItems';\nimport useWeatherServices from '../../services/WeatherApi';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport Stack from '@mui/material/Stack';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Modal from '../Modal/Modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst WeatherList = () => {\n  _s();\n\n  const [weatherCity, setWeatherCity] = useState('');\n  const {\n    userCity,\n    loading,\n    modalActive,\n    firstUpd\n  } = useSelector(store => store.weather);\n  const dispatch = useDispatch();\n  const {\n    getAutoCompleteCityName\n  } = useWeatherServices();\n  const [variables, setVariables] = useState([]);\n\n  const onUpdateCity = e => {\n    setWeatherCity(e.target.value);\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('data') && firstUpd) {\n      const data = localStorage.getItem('data').split(',');\n\n      for (let i = 0; i < data.length; i++) {\n        if (data[i]) dispatch(searchCity(data[i]));\n      }\n    }\n\n    dispatch(localCity());\n  }, []);\n  useEffect(async () => {\n    if (weatherCity.length > 3) {\n      const response = await getAutoCompleteCityName(weatherCity);\n      setVariables(response);\n    }\n  }, [weatherCity]);\n\n  const addCity = () => {\n    dispatch(searchCity(weatherCity));\n    setWeatherCity('');\n  };\n\n  const content = loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n    animation: \"border\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 25\n  }, this) : /*#__PURE__*/_jsxDEV(WeatherItems, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 56\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActive,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"modal__header\",\n        children: [\"Is your city \", userCity, \" ?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          dispatch(addUserCity(userCity));\n        },\n        className: \"modal__btn\",\n        variant: \"success\",\n        children: \"Yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          dispatch(closeModal());\n        },\n        className: \"modal__btn\",\n        variant: \"danger\",\n        children: \"No\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Add...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: 2,\n        sx: {\n          width: 300\n        },\n        children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n          id: \"free-solo-demo\",\n          freeSolo: true,\n          options: variables.map(option => option.name),\n          renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n            value: weatherCity,\n            onChange: onUpdateCity,\n            label: \"Add...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: addCity,\n        variant: \"outline-success\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }, this), ' ']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 3\n    }, this), content]\n  }, void 0, true);\n};\n\n_s(WeatherList, \"aPIfL3g04qFIpziutn0Tiu6LccA=\", false, function () {\n  return [useSelector, useDispatch, useWeatherServices];\n});\n\n_c = WeatherList;\nexport default WeatherList;\n\nvar _c;\n\n$RefreshReg$(_c, \"WeatherList\");","map":{"version":3,"sources":["C:/Users/svary/OneDrive/Рабочий стол/Auth/client/src/components/weatherList/WeatherList.js"],"names":["useEffect","useState","Button","useDispatch","useSelector","getState","searchCity","localCity","addUserCity","closeModal","WeatherItems","useWeatherServices","Autocomplete","TextField","Stack","Spinner","Modal","WeatherList","weatherCity","setWeatherCity","userCity","loading","modalActive","firstUpd","store","weather","dispatch","getAutoCompleteCityName","variables","setVariables","onUpdateCity","e","target","value","localStorage","getItem","data","split","i","length","response","addCity","content","width","map","option","name","params"],"mappings":"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","sourcesContent":["import './WeatherList.css'\r\nimport { useEffect ,useState} from \"react\";\r\nimport Button from 'react-bootstrap/Button'\r\nimport { useDispatch, useSelector,getState } from 'react-redux';\r\nimport {searchCity,localCity, addUserCity,closeModal} from './WeatherSlice';\r\nimport WeatherItems from '../weatherItems/WeatherItems';\r\nimport useWeatherServices from '../../services/WeatherApi';\r\nimport Autocomplete from '@mui/material/Autocomplete';\r\nimport TextField from '@mui/material/TextField';\r\nimport Stack from '@mui/material/Stack';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Modal from '../Modal/Modal'\r\n\r\nconst WeatherList=()=>{\r\n\r\nconst [weatherCity,setWeatherCity]=useState('')\r\nconst {userCity,loading,modalActive,firstUpd} = useSelector(store => store.weather);\r\nconst dispatch=useDispatch()\r\nconst { getAutoCompleteCityName } = useWeatherServices();\r\nconst [variables,setVariables]=useState([])\r\n\r\n\r\nconst onUpdateCity=(e)=>{\r\n  setWeatherCity(e.target.value)\r\n}\r\n\r\nuseEffect(()=>{\r\n  if(localStorage.getItem('data')&& firstUpd){\r\n  const data=localStorage.getItem('data').split(',')\r\n  for(let i=0;i<data.length;i++){\r\n    if(data[i]) dispatch(searchCity(data[i]))\r\n  } \r\n}\r\ndispatch(localCity())\r\n},[])\r\n\r\nuseEffect(async()=>{\r\n  if(weatherCity.length>3) {\r\n    const response= await getAutoCompleteCityName(weatherCity)\r\n    setVariables(response)\r\n  }\r\n},[weatherCity])\r\n\r\nconst addCity=()=>{\r\n  dispatch(searchCity(weatherCity))\r\n  setWeatherCity('')\r\n}\r\n\r\n\r\nconst content=loading ? <Spinner animation=\"border\" />:<WeatherItems/>\r\nreturn(\r\n  <>\r\n  <Modal active={modalActive} >\r\n    <h2 className='modal__header'>Is your city {userCity} ?</h2>\r\n    <Button onClick={()=>{dispatch(addUserCity(userCity))}}  className='modal__btn' variant=\"success\">Yes</Button>\r\n    <Button onClick={()=>{dispatch(closeModal())}} className='modal__btn' variant=\"danger\">No</Button>\r\n  </Modal>\r\n\r\n  <div className=\"search-panel\">\r\n     <h3>Add...</h3>   \r\n    <Stack spacing={2} sx={{ width: 300 }}>\r\n      <Autocomplete\r\n        id=\"free-solo-demo\"\r\n        freeSolo\r\n        options={variables.map((option) => option.name)}\r\n        renderInput={(params) => <TextField {...params} \r\n                                            value={weatherCity}\r\n                                            onChange={onUpdateCity} \r\n                                            label=\"Add...\" />}\r\n      />\r\n     \r\n    </Stack>\r\n    \r\n    <Button onClick={addCity} variant=\"outline-success\">Add</Button>{' '}\r\n\r\n  </div>\r\n  \r\n  {content}\r\n\r\n  </>\r\n)\r\n  \r\n\r\n}\r\nexport default WeatherList;"]},"metadata":{},"sourceType":"module"}