{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { createSlice, createAsyncThunk, current } from \"@reduxjs/toolkit\";\nimport useWeatherServices from '../../services/WeatherApi';\nimport useIpServices from '../../services/IpApi';\nconst initialState = {\n  data: [],\n  cityInfo: {},\n  city: '',\n  userCity: '',\n  allCities: [],\n  loading: false,\n  modalActive: true,\n  countryFlag: '',\n  firstUpd: true,\n  infoLoading: false\n};\nexport const searchCity = _s(createAsyncThunk('weather/searchCity', _s(async state => {\n  _s();\n\n  const {\n    getWeatherByCity\n  } = useWeatherServices();\n  const response = await getWeatherByCity(state);\n  return response;\n}, \"Zw2WUmbvtFAN4IWB85tUxg+sMu4=\", false, function () {\n  return [useWeatherServices];\n})), \"Zw2WUmbvtFAN4IWB85tUxg+sMu4=\", false, function () {\n  return [useWeatherServices];\n});\nexport const localCity = _s2(createAsyncThunk('weather/localCity', _s2(async () => {\n  _s2();\n\n  const {\n    getUserIp\n  } = useIpServices();\n  const response = await getUserIp();\n  return response;\n}, \"HSnLeCqpu7Fe4gVoRYj1McK2h1M=\", false, function () {\n  return [useIpServices];\n})), \"HSnLeCqpu7Fe4gVoRYj1McK2h1M=\", false, function () {\n  return [useIpServices];\n});\nexport const weatherInfo = _s3(createAsyncThunk('weather/weatherInfo', _s3(async state => {\n  _s3();\n\n  const {\n    getWeatherByDays\n  } = useWeatherServices();\n  const response = await getWeatherByDays(state);\n  return response;\n}, \"c1UmGJW3mafAFSWI5cLrHD8/nQE=\", false, function () {\n  return [useWeatherServices];\n})), \"c1UmGJW3mafAFSWI5cLrHD8/nQE=\", false, function () {\n  return [useWeatherServices];\n});\nexport const addUserCity = _s4(createAsyncThunk('weather/addUserCity', _s4(async state => {\n  _s4();\n\n  const {\n    getWeatherByCity\n  } = useWeatherServices();\n  const response = await getWeatherByCity(state);\n  return response;\n}, \"Zw2WUmbvtFAN4IWB85tUxg+sMu4=\", false, function () {\n  return [useWeatherServices];\n})), \"Zw2WUmbvtFAN4IWB85tUxg+sMu4=\", false, function () {\n  return [useWeatherServices];\n});\nconst WeatherSlice = createSlice({\n  name: 'weather',\n  initialState,\n  reducers: {\n    delCity: (state, action) => {\n      state.data = current(state.data).filter((item, id) => id !== action.payload);\n      state.allCities = current(state.allCities).filter((item, id) => id !== action.payload);\n      localStorage.setItem('data', state.allCities);\n    },\n    closeModal: state => {\n      state.modalActive = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(searchCity.pending, (state, action) => {\n      state.loading = true;\n    }).addCase(searchCity.fulfilled, (state, action) => {\n      state.data.push(action.payload);\n      state.allCities.push(action.payload.name);\n      state.firstUpd = false;\n      localStorage.setItem('data', current(state.allCities));\n      state.loading = false;\n    }).addCase(searchCity.rejected, (state, action) => {\n      console.log('error');\n    }).addCase(addUserCity.pending, (state, action) => {\n      state.loading = true;\n    }).addCase(addUserCity.fulfilled, (state, action) => {\n      state.data.push(action.payload);\n      state.allCities.push(action.payload.name);\n      localStorage.setItem('data', current(state.allCities));\n      state.firstUpd = false;\n      state.loading = false;\n      state.modalActive = false;\n    }).addCase(addUserCity.rejected, (state, action) => {\n      console.log('error');\n    }).addCase(weatherInfo.pending, (state, action) => {}).addCase(weatherInfo.fulfilled, (state, action) => {\n      state.cityInfo = action.payload;\n    }).addCase(weatherInfo.rejected, (state, action) => {\n      console.log('error');\n    }).addCase(localCity.fulfilled, (state, action) => {\n      state.userCity = action.payload.city;\n      state.countryFlag = action.payload.country_flag;\n      console.log(action.payload);\n    }).addCase(localCity.rejected, (state, action) => {\n      console.log(action);\n      console.log('error');\n    }).addDefaultCase(() => {});\n  }\n});\nconst {\n  actions,\n  reducer\n} = WeatherSlice;\nexport default reducer;\nexport const {\n  delCity,\n  closeModal\n} = actions;","map":{"version":3,"sources":["C:/Users/svary/OneDrive/Рабочий стол/Auth/client/src/components/weatherList/WeatherSlice.js"],"names":["createSlice","createAsyncThunk","current","useWeatherServices","useIpServices","initialState","data","cityInfo","city","userCity","allCities","loading","modalActive","countryFlag","firstUpd","infoLoading","searchCity","state","getWeatherByCity","response","localCity","getUserIp","weatherInfo","getWeatherByDays","addUserCity","WeatherSlice","name","reducers","delCity","action","filter","item","id","payload","localStorage","setItem","closeModal","extraReducers","builder","addCase","pending","fulfilled","push","rejected","console","log","country_flag","addDefaultCase","actions","reducer"],"mappings":"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","sourcesContent":["import {createSlice,createAsyncThunk,current} from \"@reduxjs/toolkit\"\r\nimport useWeatherServices from '../../services/WeatherApi'\r\nimport useIpServices from '../../services/IpApi'\r\n\r\nconst initialState = {\r\n  data:[],\r\n  cityInfo:{},\r\n  city:'',\r\n  userCity:'',\r\n  allCities:[],\r\n  loading:false,\r\n  modalActive:true,\r\n  countryFlag:'',\r\n  firstUpd:true,\r\n  infoLoading:false\r\n}\r\n\r\nexport const searchCity=createAsyncThunk(\r\n  'weather/searchCity',\r\n  async(state)=>{\r\n    const {getWeatherByCity}=useWeatherServices();\r\n    const response= await getWeatherByCity(state)\r\n    return response\r\n  }\r\n)\r\nexport const localCity=createAsyncThunk(\r\n  'weather/localCity',\r\n  async()=>{\r\n    const {getUserIp}=useIpServices()\r\n    const response=await getUserIp()\r\n    return response\r\n  }\r\n)\r\nexport const weatherInfo=createAsyncThunk(\r\n  'weather/weatherInfo',\r\n  async(state)=>{\r\n    const { getWeatherByDays } = useWeatherServices();\r\n    const response= await getWeatherByDays(state)\r\n    return response\r\n  }\r\n)\r\nexport const addUserCity=createAsyncThunk(\r\n  'weather/addUserCity',\r\n   async(state)=>{\r\n    const {getWeatherByCity}=useWeatherServices();\r\n    const response= await getWeatherByCity(state)\r\n    return response\r\n  }\r\n)\r\nconst WeatherSlice=createSlice({\r\n  name:'weather',\r\n  initialState,\r\n  reducers: {\r\n      delCity: (state, action) => {\r\n          state.data=current(state.data).filter((item,id)=>(id!==action.payload))\r\n          state.allCities=current(state.allCities).filter((item,id)=>(id!==action.payload))\r\n          localStorage.setItem('data',state.allCities)\r\n      },\r\n      closeModal:(state)=>{\r\n        state.modalActive=false;\r\n      }\r\n  },\r\n\r\n  extraReducers: (builder) => {\r\n    builder\r\n        .addCase(searchCity.pending,(state,action)=>{\r\n          state.loading=true;\r\n        })\r\n        .addCase(searchCity.fulfilled,(state,action)=>{\r\n          state.data.push(action.payload)\r\n          state.allCities.push(action.payload.name)\r\n          state.firstUpd=false\r\n          localStorage.setItem('data',current(state.allCities))\r\n          state.loading=false;         \r\n        })\r\n        .addCase(searchCity.rejected,(state,action)=>{\r\n          console.log('error')\r\n        })\r\n\r\n        .addCase(addUserCity.pending,(state,action)=>{\r\n          state.loading=true;\r\n        })\r\n        .addCase(addUserCity.fulfilled,(state,action)=>{\r\n          state.data.push(action.payload);\r\n          state.allCities.push(action.payload.name);\r\n          localStorage.setItem('data',current(state.allCities));\r\n          state.firstUpd=false\r\n          state.loading=false;\r\n          state.modalActive=false;         \r\n        })\r\n        .addCase(addUserCity.rejected,(state,action)=>{\r\n          console.log('error')\r\n        })\r\n\r\n        .addCase(weatherInfo.pending,(state,action)=>{\r\n          \r\n        })\r\n        .addCase(weatherInfo.fulfilled,(state,action)=>{\r\n          state.cityInfo=action.payload\r\n        })\r\n        .addCase(weatherInfo.rejected,(state,action)=>{\r\n          console.log('error')\r\n        })\r\n\r\n        .addCase(localCity.fulfilled,(state,action)=>{\r\n          state.userCity=action.payload.city\r\n          state.countryFlag=action.payload.country_flag\r\n          console.log(action.payload)\r\n        })\r\n        .addCase(localCity.rejected,(state,action)=>{\r\n          console.log(action)\r\n          console.log('error')\r\n        })\r\n        .addDefaultCase(() => {})\r\n}\r\n})\r\n\r\nconst {actions, reducer} = WeatherSlice;\r\n\r\nexport default reducer;\r\n\r\nexport const {\r\n  delCity,\r\n  closeModal\r\n} = actions;"]},"metadata":{},"sourceType":"module"}