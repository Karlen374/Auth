{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\svary\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\Auth\\\\client\\\\src\\\\components\\\\charList\\\\CharList.js\",\n    _s = $RefreshSig$();\n\nimport './charList.scss';\nimport { useState, useEffect } from 'react';\nimport useMarvelServices from '../../services/MarvelServices';\nimport Spinner from 'react-bootstrap/Spinner';\nimport { getCharacters } from './CharSlice';\nimport { useDispatch, useSelector, getState } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CharList = props => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n  const [offset, setOffset] = useState(211);\n  const [charEnded, setCharEnded] = useState(false);\n  const [selectedId, setId] = useState(-1);\n  const [firstUpd, setFirstUpd] = useState(true);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    getAllCharacters\n  } = useMarvelServices();\n  useEffect(() => {\n    onRequest(offset);\n    dispatch(getCharacters(offset));\n  }, []); //выполниться 1 раз только при создании \n\n  const onRequest = offset => {\n    setNewItemLoading(newItemLoading => false);\n    getAllCharacters(offset).then(onCharsLoaded);\n    console.log();\n  };\n\n  const onCharsLoaded = Chars => {\n    let ended = false;\n\n    if (Chars.length < 9) {\n      ended = true;\n    }\n\n    setData(data => [...data, ...Chars]);\n    setNewItemLoading(newItemLoading => false);\n    setOffset(offset => offset + 9);\n    setFirstUpd(false);\n    setCharEnded(charEnded => ended);\n  };\n\n  const focusOnItem = id => {\n    setId(selectedId => id);\n  };\n\n  {\n    const content = loading && firstUpd ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 43\n    }, this) : /*#__PURE__*/_jsxDEV(Element, {\n      selectedId: selectedId,\n      data: data,\n      onCharSelected: props.onCharSelected,\n      focusOnItem: focusOnItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 75\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"char__list\",\n      children: [content, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onRequest(offset),\n        disabled: newItemLoading,\n        style: {\n          'display': charEnded ? 'none' : 'block'\n        },\n        className: \"button button__main button__long\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inner\",\n          children: \"load more\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(CharList, \"GRvR2oXLI5XaJy+JeCB5MuYbx/s=\", false, function () {\n  return [useDispatch, useMarvelServices];\n});\n\n_c = CharList;\n\nconst Element = _ref => {\n  let {\n    data,\n    onCharSelected,\n    selectedId,\n    focusOnItem\n  } = _ref;\n  const elements = data.map(item => {\n    const active = item.id === selectedId;\n    const ourClass = active ? 'char__item char__item_selected' : 'char__item';\n    return /*#__PURE__*/_jsxDEV(ElementItem, { ...item,\n      ourClass: ourClass,\n      focusOnItem: () => focusOnItem(item.id),\n      onCharSelected: () => onCharSelected(item.id)\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"char__grid\",\n    children: elements\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = Element;\n\nconst ElementItem = props => {\n  const {\n    name,\n    thumbnail,\n    onCharSelected,\n    focusOnItem,\n    ourClass\n  } = props;\n  let CharImg = \"char__item__img\";\n  if (thumbnail === \"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\") CharImg = \"char__item__no__img\";\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    tabIndex: 0,\n    onClick: () => {\n      onCharSelected();\n      focusOnItem();\n    },\n    className: ourClass,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: CharImg,\n      src: thumbnail,\n      alt: \"abyss\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"char__name\",\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_c3 = ElementItem;\nexport default CharList;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"CharList\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"ElementItem\");","map":{"version":3,"sources":["C:/Users/svary/OneDrive/Рабочий стол/Auth/client/src/components/charList/CharList.js"],"names":["useState","useEffect","useMarvelServices","Spinner","getCharacters","useDispatch","useSelector","getState","CharList","props","data","setData","newItemLoading","setNewItemLoading","offset","setOffset","charEnded","setCharEnded","selectedId","setId","firstUpd","setFirstUpd","dispatch","loading","getAllCharacters","onRequest","then","onCharsLoaded","console","log","Chars","ended","length","focusOnItem","id","content","onCharSelected","Element","elements","map","item","active","ourClass","ElementItem","name","thumbnail","CharImg"],"mappings":"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","sourcesContent":["import './charList.scss';\r\nimport {useState,useEffect} from 'react'\r\nimport useMarvelServices from '../../services/MarvelServices';\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport { getCharacters } from './CharSlice';\r\nimport { useDispatch, useSelector,getState } from 'react-redux';\r\n\r\nconst CharList =(props)=>{\r\n  const [data,setData]=useState([]);\r\n  const [newItemLoading,setNewItemLoading]=useState(false);\r\n  const [offset,setOffset]=useState(211);\r\n  const [charEnded,setCharEnded]=useState(false);\r\n  const [selectedId,setId]=useState(-1);\r\n  const [firstUpd,setFirstUpd]=useState(true)\r\n  \r\n  const dispatch=useDispatch()\r\n  \r\n  const {loading,getAllCharacters}=useMarvelServices();\r\n\r\n  useEffect(() => {\r\n    onRequest(offset);\r\n    dispatch(getCharacters(offset))\r\n    },[])//выполниться 1 раз только при создании \r\n\r\n  \r\n  const onRequest = (offset) => {\r\n   \r\n    setNewItemLoading(newItemLoading=> false);\r\n    getAllCharacters(offset).then(onCharsLoaded)\r\n    console.log()\r\n  \r\n  }\r\n\r\n\r\n const onCharsLoaded = (Chars) => {\r\n\r\n    let ended = false;\r\n    if (Chars.length < 9) {\r\n      ended = true;\r\n    }\r\n    setData(data=>[...data,...Chars]);\r\n    setNewItemLoading(newItemLoading=>false);\r\n    setOffset(offset=>offset+9);\r\n    setFirstUpd(false);\r\n    setCharEnded(charEnded=>ended);\r\n    \r\n  }\r\n\r\n  const focusOnItem=(id)=>{\r\n    setId(selectedId=>id);\r\n  }\r\n  \r\n {\r\n    const content = loading && firstUpd ? <Spinner animation=\"border\" />: <Element selectedId={selectedId}  data={data} onCharSelected={props.onCharSelected} focusOnItem={focusOnItem}  />;\r\n    return (\r\n      \r\n      <div className=\"char__list\">\r\n        {content}    \r\n        <button onClick={() => onRequest(offset)} disabled={newItemLoading} style={{ 'display':charEnded?'none':'block'}} className=\"button button__main button__long\">\r\n              <div className=\"inner\">load more</div>\r\n          </button>\r\n      </div>\r\n  )\r\n  }\r\n   \r\n}\r\n\r\nconst Element = ({ data, onCharSelected,selectedId,focusOnItem}) => {\r\n  \r\n  const elements = data.map((item) => {\r\n    const active = (item.id === selectedId);\r\n    const ourClass=active?'char__item char__item_selected':'char__item'\r\n    return(\r\n      <ElementItem\r\n        key={item.id}\r\n        {...item}\r\n        ourClass={ourClass}\r\n        focusOnItem={()=>focusOnItem(item.id)}\r\n        onCharSelected={()=>onCharSelected(item.id)}\r\n        \r\n      />\r\n    )\r\n      \r\n  })\r\n  return(\r\n    <ul className=\"char__grid\">\r\n        {elements}\r\n    </ul>\r\n  )\r\n}\r\n\r\nconst ElementItem=(props)=>{\r\n  const { name, thumbnail, onCharSelected,focusOnItem,ourClass} = props;\r\n  let CharImg = \"char__item__img\" ;\r\n  if (thumbnail===\"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\") CharImg=\"char__item__no__img\"\r\n  \r\n  return(\r\n    <li   tabIndex={0}\r\n          \r\n          onClick={() => {\r\n            onCharSelected();\r\n            focusOnItem();\r\n          }}\r\n          className={ourClass}>\r\n          <img className={CharImg} src={thumbnail} alt=\"abyss\"/>\r\n          <div className=\"char__name\">{name}</div>\r\n    </li> \r\n  )\r\n}\r\n\r\n\r\n\r\nexport default CharList;\r\n"]},"metadata":{},"sourceType":"module"}