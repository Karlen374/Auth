{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport useEdamamServices from \"../../services/Edamam\";\nimport { createSlice, createAsyncThunk, current } from \"@reduxjs/toolkit\";\nconst initialState = {\n  data: [],\n  loading: false,\n  favoriteData: [],\n  FoodInfo: {},\n  favorite: false\n};\nexport const searchFood = _s(createAsyncThunk('food/searchFood', _s(async state => {\n  _s();\n\n  const {\n    getFoodData\n  } = useEdamamServices();\n  const response = await getFoodData(state);\n  return response;\n}, \"QbOIZX+NLwOB2HrbdbjBONNerIk=\", false, function () {\n  return [useEdamamServices];\n})), \"QbOIZX+NLwOB2HrbdbjBONNerIk=\", false, function () {\n  return [useEdamamServices];\n});\nconst FoodSlice = createSlice({\n  name: 'food',\n  initialState,\n  reducers: {\n    addFavorite: (state, action) => {\n      state.favoriteData.push(action.payload); // console.log(current(state.favoriteData))\n\n      localStorage.setItem('favoriteData', current(state.favoriteData));\n    },\n    delFavorite: (state, action) => {\n      console.log(`state.favoriteData=`, current(state.favoriteData));\n      console.log(`action.payload=`, action.payload);\n      const arr = []; // state.favoriteData=(state.favoriteData).filter((item)=>(\n      //   if (item.recipe.calories==action.payload.calories){\n      //   }))\n\n      for (let i = 0; i < current(state.favoriteData).length; i++) {\n        if (current(state.favoriteData[i]).recipe.calories == action.payload.calories) {\n          console.log('true');\n        }\n      } // for(let i=0;i<current(state.favoriteData);i++){\n      //   if(current(state.favoriteData[i].recipe.calories)!==action.payload.calories){\n      //     // arr.push(current(state.favoriteData[i]))\n      //     // console.log(current(state.favoriteData[i]))\n      //     console.log('true')\n      //     console.log(current(state.favoriteData[i]).recipe.calories)\n      //   }\n      // }\n      // console.log(`arr=`,arr)\n      // state.favoriteData=arr;\n      // state.favoriteData=current(state.favoriteData).filter((current(item))=>(current(item.recipe.calories)!==action.payload.calories))\n\n\n      localStorage.setItem('favoriteData', current(state.favoriteData));\n    },\n    getInfoFood: (state, action) => {\n      state.FoodInfo = action.payload;\n    },\n    changeVariables: (state, action) => {\n      state.favorite = !state.favorite;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(searchFood.pending, (state, action) => {\n      state.loading = true;\n    }).addCase(searchFood.fulfilled, (state, action) => {\n      console.log(action.payload.hits);\n      state.data = action.payload.hits;\n      state.loading = false;\n    }).addCase(searchFood.rejected, () => {\n      console.log('error');\n    });\n  }\n});\nconst {\n  actions,\n  reducer\n} = FoodSlice;\nexport default reducer;\nexport const {\n  addFavorite,\n  delFavorite,\n  getInfoFood,\n  changeVariables\n} = actions;","map":{"version":3,"sources":["C:/Users/svary/OneDrive/Рабочий стол/Auth/client/src/components/FoodSearch/FoodSlice.js"],"names":["useEdamamServices","createSlice","createAsyncThunk","current","initialState","data","loading","favoriteData","FoodInfo","favorite","searchFood","state","getFoodData","response","FoodSlice","name","reducers","addFavorite","action","push","payload","localStorage","setItem","delFavorite","console","log","arr","i","length","recipe","calories","getInfoFood","changeVariables","extraReducers","builder","addCase","pending","fulfilled","hits","rejected","actions","reducer"],"mappings":"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","sourcesContent":["import useEdamamServices from \"../../services/Edamam\";\r\nimport {createSlice,createAsyncThunk,current} from \"@reduxjs/toolkit\"\r\n\r\nconst initialState = {\r\n  data:[],\r\n  loading:false,\r\n  favoriteData:[],\r\n  FoodInfo:{},\r\n  favorite:false,\r\n}\r\n\r\nexport const searchFood=createAsyncThunk(\r\n  'food/searchFood',\r\n  async(state)=>{\r\n    const {getFoodData}=useEdamamServices();\r\n    const response=await getFoodData(state)\r\n    return response\r\n  }\r\n)\r\nconst FoodSlice=createSlice({\r\n  name:'food',\r\n  initialState,\r\n  reducers: {\r\n    addFavorite: (state, action) => {\r\n      state.favoriteData.push(action.payload)\r\n      // console.log(current(state.favoriteData))\r\n      localStorage.setItem('favoriteData',current(state.favoriteData));\r\n    },\r\n    delFavorite:(state,action)=>{\r\n      console.log(`state.favoriteData=`,current(state.favoriteData))\r\n      console.log(`action.payload=`,action.payload)\r\n      const arr=[];\r\n      // state.favoriteData=(state.favoriteData).filter((item)=>(\r\n      //   if (item.recipe.calories==action.payload.calories){\r\n \r\n      //   }))\r\n      for(let i=0;i<current(state.favoriteData).length;i++){\r\n        if ((current(state.favoriteData[i]).recipe.calories)==(action.payload.calories)){\r\n          console.log('true')\r\n        }\r\n      }\r\n      // for(let i=0;i<current(state.favoriteData);i++){\r\n      //   if(current(state.favoriteData[i].recipe.calories)!==action.payload.calories){\r\n      //     // arr.push(current(state.favoriteData[i]))\r\n      //     // console.log(current(state.favoriteData[i]))\r\n      //     console.log('true')\r\n      //     console.log(current(state.favoriteData[i]).recipe.calories)\r\n      //   }\r\n      // }\r\n      // console.log(`arr=`,arr)\r\n      // state.favoriteData=arr;\r\n      // state.favoriteData=current(state.favoriteData).filter((current(item))=>(current(item.recipe.calories)!==action.payload.calories))\r\n      \r\n      \r\n      localStorage.setItem('favoriteData',current(state.favoriteData));\r\n    },\r\n    getInfoFood:(state,action)=>{\r\n      state.FoodInfo=action.payload;\r\n    },\r\n    changeVariables:(state,action)=>{\r\n      state.favorite=!state.favorite;\r\n    }\r\n  },\r\n  extraReducers:(builder)=>{\r\n    builder\r\n      .addCase(searchFood.pending,(state,action)=>{\r\n        state.loading=true;\r\n      })\r\n      .addCase(searchFood.fulfilled,(state,action)=>{\r\n        console.log(action.payload.hits)\r\n        state.data=action.payload.hits\r\n        state.loading=false;\r\n      })\r\n      .addCase(searchFood.rejected,()=>{\r\n        console.log('error')\r\n      })\r\n  }\r\n})\r\nconst {actions, reducer} = FoodSlice;\r\n\r\nexport default reducer;\r\n\r\nexport const {\r\n  addFavorite,\r\n  delFavorite,\r\n  getInfoFood,\r\n  changeVariables\r\n} = actions;"]},"metadata":{},"sourceType":"module"}